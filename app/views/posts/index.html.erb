<h2>Posts Index</h2>

<%= render 'shared/user_row', user: @user%>

<div class='posts-list'>
  <% @posts.each do |post| %>
  <div class='post-details-container'>
    <%= render 'shared/post_card', post: post %> 
    <div class='comments-container'>
      <h3>Comments</h3>
      <% post.recent_comments.each do |comment| %>
        <p class='comment-preview'> 
          <strong><%= comment.author.name %>:</strong> 
          <%= comment.text %>
          <em><%= comment.created_at %></em>
        </p>
      <% end %>
      <% if post.comments_counter.nil? %> <p>This post has no comments</p> <% end %>
    </div>
  </div>
  <% end %>
</div>

<div class='route-links'>
  <%= link_to "See user's profile", user_path(@user_id) %>
</div>
